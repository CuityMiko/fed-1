# 快速学习新的框架

今天很流行的 Web 框架，半年以后，可能就会在市场上被『淘汰』——技术选型的时候，不被开发人员推荐；又或者它已经推出了全新的版本，使用了全新的 API，我们便需要更新现有应用。

前端框架丰富多彩的今天，快速学习新的框架是**每个前端程序员的必备技能**。

## 快速学习是基本能力

后端程序员，开始一个新的 Web 项目时：

 - 使用 Java 语言，八成会选用 Spring 框架。
 - 使用 Ruby 语言，八成会选用 Rails 框架。
 - 使用 Scala 语言，八成会先用 Play 框架。

而只使用 JavaScript 的前端程序员，开始一个前端项目时。你有几成的把握，能判断他/她出会使用哪个框架？

后端程序员在有限的时间内，只会使用固定的技术栈，固定的框架。对于大部分的公司来说，使用相同的后台语言，是一个更好的选择——即可以减少带成本，又可以沉淀下技术积累。

而前端则不一样，不同的项目都有各自的需求，因此采用使用不同的技术栈。简单的，可以直接使用原生的 JavaScript 完成，又或者是使用 jQuery 完成开发。稍微复杂一点的项目，采用容易上手的 Vue.js 是一个不错的选择。更复杂的项目，便可以使用 Angular，可以方便后台程序员转到前端。

因此，工作一定年限的程序员，都使用过不同的框架。可是，不同的程序员上手新框架的速度，总会存在一定的差异。

那么，怎样才能快速上手一个新的框架呢？

学习新的前端框架，要么该框架很火——即**热闹驱动开发**（Hype Driven Development，HDD），要么你们将采用该框架。在采用新框架的动机里，有一种是：技术演进。使用新的技术、框架，来替换现有的框架。旧的框架在某些地方上，存在着明显的缺陷。

这种情形下，业务知识本身是不变的，只是要由框架本身来应对业务的变化。因此，使用新的技术来替换旧有的框架，就相当的容易——重写，我们甚至可以直接复制、粘贴，大量原有的代码。只是，仅仅做到重写业务逻辑是不够的。我们还要掌握新的框架的核心，并探索更多的可能性。

## 如何学习新框架：守-破-离

我在学校的时候，看到一个关于编程语言的学习建议：**学习三种以上的编程语言，并且它们最好是三种不同类型的语言**。如面向过程的编程语言 C 、脚本语言 JavaScript、Python，面向对象的编程语言 Java、再加上个近年来火热的函数式编程语言，到底也就差不多了。当我们学习了一门语言，再上手一门相似风格的语言，也是相当轻松地一件事。当我们学习了不同类型的几种语言，未来就可以轻松地绝大多数的语言。

相似的，学习使用 Web 框架也是如此的。现在，对于我而来，使用一个新框架的姿势是：

 - 买本中文书或者找个教程、官方的 Guide，花个十几分钟了解一下框架的『知识图谱』。
 - 直接找个官方的示例，运行一下 Demo。
 - 上手写写应用。
 - 查看官方文档，看看自己是不是漏掉了什么重要的东西。

它与我在公司接受培训的时候，学习到的『守破离』观点相似。在保留原来业务的情况下，一步步向前演进。

### 守：应用业务知识

在现有的业务上，使用新的框架是一件容易的事。拿上一份框架的说明书、一份需求文档、一个搜索引擎，就可以很容易地复制出一个产品。唯一的门槛是，你需要会读懂这些内容。这有点像新的知识阶级，只是门槛不再是识字与否，而在于是否能懂编程的知识。

正如维基百科上，对于『守』的介绍一样：

> 最初阶段须遵从老师教诲，认真练习基础，达到熟练的境界。

新手期的我们，拿到一个新的框架，要一下子对它了运用自如，是一件很难的事。我们只能在一个又一个的练习中，尝试去掌握框架的知识。

熟练之后，我们也会练习我们的基本套路，如对于我来说：

采用一个模板，GitHub 上寻找，这样的项目很多。

举例，如 Backbone + jQuery -> Vue.js

最后，剩下的一个问题是：**如何找到一个合适的练习项目**。

我想问题的关键可能在于，我们手上没有一个已经成型的业务系统。因而，我建议大家可以从创建一个博客开始做起，先使用现有的技术，再使用新的技术，慢慢的一点点往上添加内容。

如我的博客，最早是基于 Django + Bootstrap，慢慢的我添加了一些新的东西：

 - 用于为搜索提供建议的 AutoSuggest
 - 移动应用 API 及博客搜索 API
 - 微信搜索支持功能
 - 支持 Google AMP 来快速加载页面
 - Google Micro Data

尽管越来越多的功能,有一些已经不再维护、关闭了。

### 破：学习框架核心

> 基础熟练后，试着突破原有规范让自己得到更高层次的进化。

转换技术栈，本身没有什么技术含量，但是能帮助稳固知识。当我们已经熟悉使用这个框架完成业务时，便可以细入相关思想。

了解这个框架的能力，生成一份与框架有关的索引，也可以用脑图的形势来整理这些内容。

如：

![嵌入式系统工程师图谱](../images/eks-example.jpg)

举例，如 Angular + TypeScript，还有其他更多的可能性

同时，我们还应该理解框架背后的原理。不一定深入，但是觉得去探究。如：

  - MV* 思想
  - 双向数据绑定的基本原理

这些都在我的知乎专栏上《我的职业是前端工程师》有深入的介绍，有时候的读者建议多阅读相关的内容。

### 离：探索更多可能性

> 在更高层次得到新的认识并总结，自创新招数另辟出新境界。

在那之上，创造出一些新的框架。

如 Redux，最早是运行的 React.js 之上。Angular 2 出来了后，有了 xx。小程序出来后，有了 xx。

同理于此，

如在出现微信小程序的一两个星期内，我写了几篇原理相关的文章，并介绍了如何创建一个属于自己的小程序应用框架 WINV。又或者是我在对 Virtual Dom 有一定的了解后，便深入 Virtual Dom 的代码，写了一个基于 Virtual Dom 的测试辅助框架。

而这些，只有我们理解他们的原理之后，我们才可能做到这样的事。


## 小结

寻找心流

这些方法适用于大部分的人，但是不一定适合你。你只需要寻找到适合你的路，然后学习。

## 选择合适的前端框架

在《全栈应用开发：精益实践》一书中，我曾提到过影响技术选型的几个因素：

![选型因素](../images/tech-decide.png)

**锤子定律：寻找更大视野**

**年轻的时候，学会了 A 框架，总觉得 Z 网站用 A 框架来实现会更好**，一定不会像今天这样经常崩溃、出Bug。**时间一长，有时候就会发现，Z 网站使用 A 不合适，他们的问题并不是框架的问题，而是运维的问题。

在《咨询的奥秘》一书中，提到一个有意思的定律“锤子定律”（又称为工具定律）——**圣诞节收到一把锤子的孩子，会发现所有东西都需要敲打**。 出现这种情况的主要原因是，**开发者对一个熟悉的工具过度的依赖**。

认真观察，就会发现这个现象随处可见。当一个新手程序员学会了某个最新的框架，通常来说这个框架有着更多的优点，这个时候最容易出现的想法是：**替换现有的框架**。可是，现有的框架并没有什么大的问题。并且凭估不充分时，新的框架则存在更多的风险。

并且，对于某个熟悉工具的过度依赖，特别容易影响到技术决策——看不到更多的可能性。这时候，我们就需要头脑风暴。但是这种情况下，头脑风暴很难帮助解决问题。在这个时候，拥有更多项目、框架经验的人，可能会做出更好的选择。

###  Angular，一站式提高生产力

与 Backbone 同一时代诞生的 Angular 便是一个大而全的 MVC 框架。在这个框架里，它提供了我们所需要的各种功能，如模块管理、双向绑定等等。它涵盖了开发中的各个层面，并且层与层之间都经过了精心调适。

我们所需要做的便是遵循其设计思想，来一步步完善我们的应用。Angular.js 的创建理念是：即声明式编程应该用于构建用户界面以及编写软件构件，而命令式编程非常适合来表示业务逻辑。

我开始使用 Angular.js 的原因是，我使用 Ionic 来创建混合应用。出于对制作移动应用的好奇，我创建了一个又一个的移动应用，也在这时学会了 Angular.js。对于我而言，选择合适的技术栈，远远比选择流行的技术栈要重要得多，这也是我喜欢使用 Ionic 的原因。当我们在制作一个应用，它对性能要求不是很高的时候，那么我们应该选择开发速度更快的技术栈。

对于复杂的前端应用来说，基于 Angular.js 应用的运行效率，仍然有大量地改进空间。在应用运行的过程中，需要不断地操作 DOM，会造成明显的卡顿。对于 WebView 性能较差或早期的移动设备来说，这就是一个致命伤。

幸运的是在 2016 年底，Angular 团队推出了 Angular 2，它使用 Zone.js 实现变化的自动检测、

而迟来的 Angular 2 则受**奥斯本效应**[^osborne]的影响，逼得相当多的开发者们开始转向其它的框架。

[^osborne]: 颇受欢迎的个人电脑厂商奥斯本，其公司的创新式便携电脑还没有上市，就宣布他们要推出的更高档的机器，而又迟迟无法交货，消费者闻风纷纷停止下单订购现有机种，最后导致奥斯本因收入枯竭而宣布破产。

### React，组件化提高复用

从 Backbone 和 Angular.js 的性能问题上来看，我们会发现 DOM 是单页面应用急需改善的问题——主要是DOM 的操作非常慢。而在单页面应用中，我们又需要处理大量的 DOM，性能就更是问题了。于是，采用 Virtual DOM 的 React 的诞生，让那些饱受性能苦恼的开发者欢迎。

传统的 DOM 操作是直接在 DOM 上操作的，当需要修改一系列元素中的值时，就会直接对 DOM 进行操作。而采用 Virtual DOM 则会对需要修改的 DOM 进行比较（DIFF），从而只选择需要修改的部分。也因此对于不需要大量修改 DOM 的应用来说，采用 Virtual DOM 并不会有优势。开发者就可以创建出可交互的 UI。

除了编写应用时，不需要对 DOM 进行直接操作，提高了应用的性能。React 还有一个重要思想是组件化，即 UI 中的每个组件都是独立封装的。与此同时，由于这些组件独立于 HTML，使它们不仅仅可以运行在浏览器里，还能作为原生应用的组件来运行。

同时，在 React 中还引入了 JSX 模板，即在 JS 中编写模板，还需要使用 ES 6。令人遗憾的是 React 只是一个 View 层，它是为了优化 DOM 的操作而诞生的。为了完成一个完整的应用，我们还需要路由库、执行单向流库、web API 调用库、测试库、依赖管理库等等，这简直是一场噩梦。因此为了完整搭建出一个完整的 React 项目，我们还需要做大量的额外工作。

大量的人选择 React 还有一个原因是：React Native、React VR 等等，可以让 React 运行在不同的平台之上。我们还能通过 React 轻松编写出原生应用，还有 VR 应用。

在看到 Angular 2 升级以及 React 复杂性的时候，我相信有相当多的开发者转而选择 Vue.js。

### Vue.js，简单也是提高效率

引自官网的介绍，Vue.js 是一套构建用户界面的渐进式框架，专注于MVVM 模型的 ViewModel 层。Vue.js 不仅简单、容易上手、配置设施齐全，同时拥有中文文档。

对于使用 Vue.js 的开发者来说，我们仍然可以使用 熟悉的 HTML 和 CSS 来编写代码。并且，Vue.js 也使用了 Virtual DOM、Reactive 及组件化的思想，可以让我们集中精力于编写应用，而不是应用的性能。

对于没有 Angular 和 React 经验的团队，并且规模不大的前端项目来说，Vue.js 是一个非常好的选择。

虽然 Vue.js 的生态与 React 相比虽然差上一截，但是配套设施还是相当齐全的，如 Vuex 、 VueRouter。只是，这些组件配套都由官方来提供、维护，甚至连 awesome-vue 也都是官方项目，总觉得有些奇怪。

除此，Vue.js 中定义了相当多的规矩，这种风格似乎由 jQuery 时代遗留下来的。照着这些规矩来写代码，让人觉得有些不自在。

和 React 相似的是，Vue.js 也有相应的 Native 方案 Weex，仍然值得我们期待。
